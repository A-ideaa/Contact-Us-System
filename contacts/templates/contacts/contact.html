{% extends 'contacts/base.html' %}

{% block content %}
<div class="max-w-2xl mx-auto">
    <div class="bg-white shadow-lg rounded-lg overflow-hidden">
        <div class="px-6 py-8">
            <h1 class="text-3xl font-bold text-gray-900 mb-2">Contact Us</h1>
            <p class="text-gray-600 mb-8">Fill out the form below and we'll get back to you as soon as possible.</p>
            
            <form method="post" class="space-y-6" id="contactForm">
                {% csrf_token %}
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="form-group">
                        <label for="id_first_name" class="block text-sm font-semibold text-gray-700 mb-1">First Name</label>
                        {{ form.first_name }}
                        {% if form.first_name.errors %}
                            <p class="mt-1 text-sm text-red-600">{{ form.first_name.errors.0 }}</p>
                        {% endif %}
                    </div>
                    
                    <div class="form-group">
                        <label for="id_last_name" class="block text-sm font-semibold text-gray-700 mb-1">Last Name</label>
                        {{ form.last_name }}
                        {% if form.last_name.errors %}
                            <p class="mt-1 text-sm text-red-600">{{ form.last_name.errors.0 }}</p>
                        {% endif %}
                    </div>
                </div>
                
                <div class="space-y-4">
                    <div class="form-group">
                        <label for="id_service" class="block text-sm font-semibold text-gray-700 mb-1">Service Required</label>
                        {{ form.service }}
                        {% if form.service.errors %}
                            <p class="mt-1 text-sm text-red-600">{{ form.service.errors.0 }}</p>
                        {% endif %}
                    </div>

                    <div id="other_service_group" class="form-group" style="display: none;">
                        <label for="id_other_service" class="block text-sm font-semibold text-gray-700 mb-1">Specify Other Service</label>
                        {{ form.other_service }}
                        {% if form.other_service.errors %}
                            <p class="mt-1 text-sm text-red-600">{{ form.other_service.errors.0 }}</p>
                        {% endif %}
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="id_email" class="block text-sm font-semibold text-gray-700 mb-1">Email Address</label>
                    {{ form.email }}
                    {% if form.email.errors %}
                        <p class="mt-1 text-sm text-red-600">{{ form.email.errors.0 }}</p>
                    {% endif %}
                </div>
                
                <div class="form-group">
                    <label for="id_phone_number" class="block text-sm font-semibold text-gray-700 mb-1">
                        Phone Number
                        <span class="text-gray-500 text-xs">(Optional)</span>
                    </label>
                    <div class="flex">
                        <div class="w-1/3 mr-2 relative">
                            <div class="relative">
                                <input type="text" id="country_search" placeholder="Search country..." 
                                    class="w-full pl-3 pr-10 py-2 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                                <div id="country_dropdown" class="absolute z-10 w-full mt-1 bg-white shadow-lg max-h-60 rounded-md py-1 text-base overflow-auto focus:outline-none sm:text-sm hidden">
                                    <!-- Country options will be populated by JavaScript -->
                                </div>
                            </div>
                            {{ form.country_code }}
                            <div id="selected_country" class="mt-2 text-sm"></div>
                        </div>
                        <div class="flex-1">
                            {{ form.phone_number }}
                        </div>
                        {{ form.full_phone_number }}
                    </div>
                    <p id="phone_error" class="mt-1 text-sm text-red-600 hidden"></p>
                    {% if form.phone_number.errors %}
                        <p class="mt-1 text-sm text-red-600">{{ form.phone_number.errors.0 }}</p>
                    {% endif %}
                </div>
                
                <div class="form-group">
                    <label for="id_description" class="block text-sm font-semibold text-gray-700 mb-1">Description</label>
                    {{ form.description }}
                    {% if form.description.errors %}
                        <p class="mt-1 text-sm text-red-600">{{ form.description.errors.0 }}</p>
                    {% endif %}
                </div>
                
                <div class="pt-4">
                    <button type="submit" class="w-full bg-blue-600 text-white py-3 px-4 rounded-md text-sm font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-150 ease-in-out">
                        Submit
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
// Complete country codes data from a comprehensive dataset
const countryCodes = [
    { code: "+93", country: "Afghanistan", digits: 9 },
    { code: "+355", country: "Albania", digits: 9 },
    { code: "+213", country: "Algeria", digits: 9 },
    { code: "+1-684", country: "American Samoa", digits: 7 },
    { code: "+376", country: "Andorra", digits: 6 },
    { code: "+244", country: "Angola", digits: 9 },
    { code: "+1-264", country: "Anguilla", digits: 7 },
    { code: "+672", country: "Antarctica", digits: 6 },
    { code: "+1-268", country: "Antigua and Barbuda", digits: 7 },
    { code: "+54", country: "Argentina", digits: 10 },
    { code: "+374", country: "Armenia", digits: 8 },
    { code: "+297", country: "Aruba", digits: 7 },
    { code: "+61", country: "Australia", digits: 9 },
    { code: "+43", country: "Austria", digits: 10 },
    { code: "+994", country: "Azerbaijan", digits: 9 },
    { code: "+1-242", country: "Bahamas", digits: 7 },
    { code: "+973", country: "Bahrain", digits: 8 },
    { code: "+880", country: "Bangladesh", digits: 10 },
    { code: "+1-246", country: "Barbados", digits: 7 },
    { code: "+375", country: "Belarus", digits: 9 },
    { code: "+32", country: "Belgium", digits: 9 },
    { code: "+501", country: "Belize", digits: 7 },
    { code: "+229", country: "Benin", digits: 8 },
    { code: "+1-441", country: "Bermuda", digits: 7 },
    { code: "+975", country: "Bhutan", digits: 8 },
    { code: "+591", country: "Bolivia", digits: 8 },
    { code: "+387", country: "Bosnia and Herzegovina", digits: 8 },
    { code: "+267", country: "Botswana", digits: 8 },
    { code: "+55", country: "Brazil", digits: 11 },
    { code: "+246", country: "British Indian Ocean Territory", digits: 7 },
    { code: "+1-284", country: "British Virgin Islands", digits: 7 },
    { code: "+673", country: "Brunei", digits: 7 },
    { code: "+359", country: "Bulgaria", digits: 9 },
    { code: "+226", country: "Burkina Faso", digits: 8 },
    { code: "+257", country: "Burundi", digits: 8 },
    { code: "+855", country: "Cambodia", digits: 9 },
    { code: "+237", country: "Cameroon", digits: 9 },
    { code: "+1", country: "Canada", digits: 10 },
    { code: "+238", country: "Cape Verde", digits: 7 },
    { code: "+1-345", country: "Cayman Islands", digits: 7 },
    { code: "+236", country: "Central African Republic", digits: 8 },
    { code: "+235", country: "Chad", digits: 8 },
    { code: "+56", country: "Chile", digits: 9 },
    { code: "+86", country: "China", digits: 11 },
    { code: "+61", country: "Christmas Island", digits: 9 },
    { code: "+61", country: "Cocos Islands", digits: 9 },
    { code: "+57", country: "Colombia", digits: 10 },
    { code: "+269", country: "Comoros", digits: 7 },
    { code: "+682", country: "Cook Islands", digits: 5 },
    { code: "+506", country: "Costa Rica", digits: 8 },
    { code: "+385", country: "Croatia", digits: 9 },
    { code: "+53", country: "Cuba", digits: 8 },
    { code: "+599", country: "Curacao", digits: 7 },
    { code: "+357", country: "Cyprus", digits: 8 },
    { code: "+420", country: "Czech Republic", digits: 9 },
    { code: "+243", country: "Democratic Republic of the Congo", digits: 9 },
    { code: "+45", country: "Denmark", digits: 8 },
    { code: "+253", country: "Djibouti", digits: 8 },
    { code: "+1-767", country: "Dominica", digits: 7 },
    { code: "+1-809", country: "Dominican Republic", digits: 10 },
    { code: "+670", country: "East Timor", digits: 7 },
    { code: "+593", country: "Ecuador", digits: 9 },
    { code: "+20", country: "Egypt", digits: 10 },
    { code: "+503", country: "El Salvador", digits: 8 },
    { code: "+240", country: "Equatorial Guinea", digits: 9 },
    { code: "+291", country: "Eritrea", digits: 7 },
    { code: "+372", country: "Estonia", digits: 8 },
    { code: "+251", country: "Ethiopia", digits: 9 },
    { code: "+500", country: "Falkland Islands", digits: 5 },
    { code: "+298", country: "Faroe Islands", digits: 6 },
    { code: "+679", country: "Fiji", digits: 7 },
    { code: "+358", country: "Finland", digits: 10 },
    { code: "+33", country: "France", digits: 9 },
    { code: "+594", country: "French Guiana", digits: 9 },
    { code: "+689", country: "French Polynesia", digits: 6 },
    { code: "+241", country: "Gabon", digits: 7 },
    { code: "+220", country: "Gambia", digits: 7 },
    { code: "+995", country: "Georgia", digits: 9 },
    { code: "+49", country: "Germany", digits: 11 },
    { code: "+233", country: "Ghana", digits: 9 },
    { code: "+350", country: "Gibraltar", digits: 8 },
    { code: "+30", country: "Greece", digits: 10 },
    { code: "+299", country: "Greenland", digits: 6 },
    { code: "+1-473", country: "Grenada", digits: 7 },
    { code: "+590", country: "Guadeloupe", digits: 9 },
    { code: "+1-671", country: "Guam", digits: 7 },
    { code: "+502", country: "Guatemala", digits: 8 },
    { code: "+44-1481", country: "Guernsey", digits: 6 },
    { code: "+224", country: "Guinea", digits: 9 },
    { code: "+245", country: "Guinea-Bissau", digits: 7 },
    { code: "+592", country: "Guyana", digits: 7 },
    { code: "+509", country: "Haiti", digits: 8 },
    { code: "+504", country: "Honduras", digits: 8 },
    { code: "+852", country: "Hong Kong", digits: 8 },
    { code: "+36", country: "Hungary", digits: 9 },
    { code: "+354", country: "Iceland", digits: 7 },
    { code: "+91", country: "India", digits: 10 },
    { code: "+62", country: "Indonesia", digits: 10 },
    { code: "+98", country: "Iran", digits: 10 },
    { code: "+964", country: "Iraq", digits: 10 },
    { code: "+353", country: "Ireland", digits: 9 },
    { code: "+44-1624", country: "Isle of Man", digits: 6 },
    { code: "+972", country: "Israel", digits: 9 },
    { code: "+39", country: "Italy", digits: 10 },
    { code: "+225", country: "Ivory Coast", digits: 8 },
    { code: "+1-876", country: "Jamaica", digits: 7 },
    { code: "+81", country: "Japan", digits: 10 },
    { code: "+44-1534", country: "Jersey", digits: 6 },
    { code: "+962", country: "Jordan", digits: 9 },
    { code: "+7", country: "Kazakhstan", digits: 10 },
    { code: "+254", country: "Kenya", digits: 9 },
    { code: "+686", country: "Kiribati", digits: 5 },
    { code: "+383", country: "Kosovo", digits: 8 },
    { code: "+965", country: "Kuwait", digits: 8 },
    { code: "+996", country: "Kyrgyzstan", digits: 9 },
    { code: "+856", country: "Laos", digits: 10 },
    { code: "+371", country: "Latvia", digits: 8 },
    { code: "+961", country: "Lebanon", digits: 8 },
    { code: "+266", country: "Lesotho", digits: 8 },
    { code: "+231", country: "Liberia", digits: 8 },
    { code: "+218", country: "Libya", digits: 9 },
    { code: "+423", country: "Liechtenstein", digits: 7 },
    { code: "+370", country: "Lithuania", digits: 8 },
    { code: "+352", country: "Luxembourg", digits: 9 },
    { code: "+853", country: "Macau", digits: 8 },
    { code: "+389", country: "Macedonia", digits: 8 },
    { code: "+261", country: "Madagascar", digits: 9 },
    { code: "+265", country: "Malawi", digits: 9 },
    { code: "+60", country: "Malaysia", digits: 9 },
    { code: "+960", country: "Maldives", digits: 7 },
    { code: "+223", country: "Mali", digits: 8 },
    { code: "+356", country: "Malta", digits: 8 },
    { code: "+692", country: "Marshall Islands", digits: 7 },
    { code: "+596", country: "Martinique", digits: 9 },
    { code: "+222", country: "Mauritania", digits: 8 },
    { code: "+230", country: "Mauritius", digits: 8 },
    { code: "+262", country: "Mayotte", digits: 9 },
    { code: "+52", country: "Mexico", digits: 10 },
    { code: "+691", country: "Micronesia", digits: 7 },
    { code: "+373", country: "Moldova", digits: 8 },
    { code: "+377", country: "Monaco", digits: 8 },
    { code: "+976", country: "Mongolia", digits: 8 },
    { code: "+382", country: "Montenegro", digits: 8 },
    { code: "+1-664", country: "Montserrat", digits: 7 },
    { code: "+212", country: "Morocco", digits: 9 },
    { code: "+258", country: "Mozambique", digits: 9 },
    { code: "+95", country: "Myanmar", digits: 9 },
    { code: "+264", country: "Namibia", digits: 9 },
    { code: "+674", country: "Nauru", digits: 7 },
    { code: "+977", country: "Nepal", digits: 10 },
    { code: "+31", country: "Netherlands", digits: 9 },
    { code: "+599", country: "Netherlands Antilles", digits: 7 },
    { code: "+687", country: "New Caledonia", digits: 6 },
    { code: "+64", country: "New Zealand", digits: 9 },
    { code: "+505", country: "Nicaragua", digits: 8 },
    { code: "+227", country: "Niger", digits: 8 },
    { code: "+234", country: "Nigeria", digits: 10 },
    { code: "+683", country: "Niue", digits: 4 },
    { code: "+672", country: "Norfolk Island", digits: 6 },
    { code: "+850", country: "North Korea", digits: 10 },
    { code: "+1-670", country: "Northern Mariana Islands", digits: 7 },
    { code: "+47", country: "Norway", digits: 8 },
    { code: "+968", country: "Oman", digits: 8 },
    { code: "+92", country: "Pakistan", digits: 10 },
    { code: "+680", country: "Palau", digits: 7 },
    { code: "+970", country: "Palestine", digits: 9 },
    { code: "+507", country: "Panama", digits: 8 },
    { code: "+675", country: "Papua New Guinea", digits: 8 },
    { code: "+595", country: "Paraguay", digits: 9 },
    { code: "+51", country: "Peru", digits: 9 },
    { code: "+63", country: "Philippines", digits: 10 },
    { code: "+64", country: "Pitcairn", digits: 9 },
    { code: "+48", country: "Poland", digits: 9 },
    { code: "+351", country: "Portugal", digits: 9 },
    { code: "+1-787, +1-939", country: "Puerto Rico", digits: 10 },
    { code: "+974", country: "Qatar", digits: 8 },
    { code: "+242", country: "Republic of the Congo", digits: 9 },
    { code: "+262", country: "Reunion", digits: 9 },
    { code: "+40", country: "Romania", digits: 9 },
    { code: "+7", country: "Russia", digits: 10 },
    { code: "+250", country: "Rwanda", digits: 9 },
    { code: "+590", country: "Saint Barthelemy", digits: 9 },
    { code: "+290", country: "Saint Helena", digits: 4 },
    { code: "+1-869", country: "Saint Kitts and Nevis", digits: 7 },
    { code: "+1-758", country: "Saint Lucia", digits: 7 },
    { code: "+590", country: "Saint Martin", digits: 9 },
    { code: "+508", country: "Saint Pierre and Miquelon", digits: 6 },
    { code: "+1-784", country: "Saint Vincent and the Grenadines", digits: 7 },
    { code: "+685", country: "Samoa", digits: 7 },
    { code: "+378", country: "San Marino", digits: 8 },
    { code: "+239", country: "Sao Tome and Principe", digits: 7 },
    { code: "+966", country: "Saudi Arabia", digits: 9 },
    { code: "+221", country: "Senegal", digits: 9 },
    { code: "+381", country: "Serbia", digits: 9 },
    { code: "+248", country: "Seychelles", digits: 7 },
    { code: "+232", country: "Sierra Leone", digits: 8 },
    { code: "+65", country: "Singapore", digits: 8 },
    { code: "+1-721", country: "Sint Maarten", digits: 7 },
    { code: "+421", country: "Slovakia", digits: 9 },
    { code: "+386", country: "Slovenia", digits: 8 },
    { code: "+677", country: "Solomon Islands", digits: 7 },
    { code: "+252", country: "Somalia", digits: 8 },
    { code: "+27", country: "South Africa", digits: 9 },
    { code: "+82", country: "South Korea", digits: 10 },
    { code: "+211", country: "South Sudan", digits: 9 },
    { code: "+34", country: "Spain", digits: 9 },
    { code: "+94", country: "Sri Lanka", digits: 9 },
    { code: "+249", country: "Sudan", digits: 9 },
    { code: "+597", country: "Suriname", digits: 7 },
    { code: "+47", country: "Svalbard and Jan Mayen", digits: 8 },
    { code: "+268", country: "Swaziland", digits: 8 },
    { code: "+46", country: "Sweden", digits: 9 },
    { code: "+41", country: "Switzerland", digits: 9 },
    { code: "+963", country: "Syria", digits: 9 },
    { code: "+886", country: "Taiwan", digits: 9 },
    { code: "+992", country: "Tajikistan", digits: 9 },
    { code: "+255", country: "Tanzania", digits: 9 },
    { code: "+66", country: "Thailand", digits: 9 },
    { code: "+670", country: "Timor-Leste", digits: 7 },
    { code: "+228", country: "Togo", digits: 8 },
    { code: "+690", country: "Tokelau", digits: 4 },
    { code: "+676", country: "Tonga", digits: 5 },
    { code: "+1-868", country: "Trinidad and Tobago", digits: 7 },
    { code: "+216", country: "Tunisia", digits: 8 },
    { code: "+90", country: "Turkey", digits: 10 },
    { code: "+993", country: "Turkmenistan", digits: 8 },
    { code: "+1-649", country: "Turks and Caicos Islands", digits: 7 },
    { code: "+688", country: "Tuvalu", digits: 5 },
    { code: "+1-340", country: "U.S. Virgin Islands", digits: 7 },
    { code: "+256", country: "Uganda", digits: 9 },
    { code: "+380", country: "Ukraine", digits: 9 },
    { code: "+971", country: "United Arab Emirates", digits: 9 },
    { code: "+44", country: "United Kingdom", digits: 10 },
    { code: "+1", country: "United States", digits: 10 },
    { code: "+598", country: "Uruguay", digits: 8 },
    { code: "+998", country: "Uzbekistan", digits: 9 },
    { code: "+678", country: "Vanuatu", digits: 7 },
    { code: "+379", country: "Vatican", digits: 10 },
    { code: "+58", country: "Venezuela", digits: 10 },
    { code: "+84", country: "Vietnam", digits: 9 },
    { code: "+681", country: "Wallis and Futuna", digits: 6 },
    { code: "+212", country: "Western Sahara", digits: 9 },
    { code: "+967", country: "Yemen", digits: 9 },
    { code: "+260", country: "Zambia", digits: 9 },
    { code: "+263", country: "Zimbabwe", digits: 9 }
];

// Initialize country code dropdown
function initCountryCodeDropdown() {
    const countryCodeSelect = document.getElementById('id_country_code');
    const countryDropdown = document.getElementById('country_dropdown');
    const countrySearch = document.getElementById('country_search');
    const selectedCountryDiv = document.getElementById('selected_country');
    
    // Hide the original dropdown
    countryCodeSelect.classList.add('hidden');
    
    // Sort countries alphabetically
    countryCodes.sort((a, b) => a.country.localeCompare(b.country));
    
    // Add countries to dropdown
    countryCodes.forEach(country => {
        // Add to hidden select
        const option = document.createElement('option');
        option.value = country.code;
        option.text = `${country.country} (${country.code})`;
        option.dataset.digits = country.digits;
        countryCodeSelect.appendChild(option);
        
        // Add to searchable dropdown
        const div = document.createElement('div');
        div.className = 'cursor-pointer select-none relative py-2 pl-3 pr-9 hover:bg-gray-100';
        div.textContent = `${country.country} (${country.code})`;
        div.dataset.code = country.code;
        div.dataset.country = country.country;
        div.dataset.digits = country.digits;
        
        div.addEventListener('click', function() {
            countryCodeSelect.value = this.dataset.code;
            selectedCountryDiv.textContent = `${this.dataset.country} (${this.dataset.code})`;
            countrySearch.value = '';
            countryDropdown.classList.add('hidden');
            
            // Validate phone number if already entered
            validatePhoneNumberForCountry();
        });
        
        countryDropdown.appendChild(div);
    });
    
    // Set default country code (e.g., United States)
    const defaultCode = countryCodes.find(c => c.country === "United States");
    if (defaultCode) {
        countryCodeSelect.value = defaultCode.code;
        selectedCountryDiv.textContent = `${defaultCode.country} (${defaultCode.code})`;
    }
    
    // Show/hide dropdown on click
    countrySearch.addEventListener('focus', function() {
        countryDropdown.classList.remove('hidden');
    });
    
    // Handle clicks outside the dropdown
    document.addEventListener('click', function(e) {
        if (!countrySearch.contains(e.target) && !countryDropdown.contains(e.target)) {
            countryDropdown.classList.add('hidden');
        }
    });
    
    // Filter countries on search
    countrySearch.addEventListener('input', function() {
        const searchTerm = this.value.toLowerCase();
        
        Array.from(countryDropdown.children).forEach(option => {
            const text = option.textContent.toLowerCase();
            if (text.includes(searchTerm)) {
                option.style.display = 'block';
            } else {
                option.style.display = 'none';
            }
        });
        
        countryDropdown.classList.remove('hidden');
    });
}

// Phone number validation
function validatePhoneNumber() {
    const phoneInput = document.getElementById('id_phone_number');
    const countryCodeSelect = document.getElementById('id_country_code');
    const phoneError = document.getElementById('phone_error');
    const fullPhoneNumberInput = document.getElementById('id_full_phone_number');
    
    // Allow only numbers in the phone field
    phoneInput.addEventListener('input', function(e) {
        this.value = this.value.replace(/[^0-9]/g, '');
        validatePhoneNumberForCountry();
    });
    
    // Validate phone number on form submission
    document.getElementById('contactForm').addEventListener('submit', function(e) {
        if (phoneInput.value.trim() !== '') {
            const selectedOption = countryCodeSelect.options[countryCodeSelect.selectedIndex];
            const requiredDigits = parseInt(selectedOption.dataset.digits);
            
            if (phoneInput.value.length !== requiredDigits) {
                e.preventDefault();
                phoneError.textContent = `Phone number for ${selectedOption.text.split(' (')[0]} must be ${requiredDigits} digits.`;
                phoneError.classList.remove('hidden');
                return false;
            } else {
                phoneError.classList.add('hidden');
                // Combine country code and phone number for submission
                fullPhoneNumberInput.value = countryCodeSelect.value + phoneInput.value;
            }
        }
    });
}

// Validate phone number based on selected country
function validatePhoneNumberForCountry() {
    const phoneInput = document.getElementById('id_phone_number');
    const countryCodeSelect = document.getElementById('id_country_code');
    const phoneError = document.getElementById('phone_error');
    
    if (phoneInput.value.trim() !== '') {
        const selectedOption = countryCodeSelect.options[countryCodeSelect.selectedIndex];
        const requiredDigits = parseInt(selectedOption.dataset.digits);
        
        if (phoneInput.value.length !== requiredDigits) {
            phoneError.textContent = `Phone number for ${selectedOption.text.split(' (')[0]} must be ${requiredDigits} digits.`;
            phoneError.classList.remove('hidden');
        } else {
            phoneError.classList.add('hidden');
        }
    } else {
        phoneError.classList.add('hidden');
    }
}

function toggleOtherService(value) {
    const otherServiceGroup = document.getElementById('other_service_group');
    const otherServiceInput = document.getElementById('id_other_service');
    
    if (value === 'other') {
        otherServiceGroup.style.display = 'block';
        otherServiceInput.focus();
    } else {
        otherServiceGroup.style.display = 'none';
        otherServiceInput.value = '';
    }
}

// Initialize on page load
document.addEventListener('DOMContentLoaded', function() {
    const serviceSelect = document.getElementById('id_service');
    if (serviceSelect) {
        toggleOtherService(serviceSelect.value);
    }
    
    // Initialize country code dropdown and phone validation
    initCountryCodeDropdown();
    validatePhoneNumber();
});
</script>
{% endblock %}